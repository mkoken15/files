<!DOCTYPE html><html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestionnaire de Fichiers</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
    header { background-color: #333; color: white; padding: 1em; text-align: center; }
    .controls { padding: 1em; display: flex; justify-content: space-between; flex-wrap: wrap; gap: 0.5em; }
    .controls input, .controls select, .controls button { padding: 0.5em; font-size: 1em; }
    #folders { display: flex; flex-wrap: wrap; gap: 1em; padding: 1em; }
    .folder { background: white; padding: 1em; border-radius: 8px; cursor: pointer; width: 45%; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .folder:hover { background: #eee; }
    #media { display: none; flex-wrap: wrap; gap: 1em; padding: 1em; }
    .media-item { background: white; padding: 0.5em; border-radius: 8px; width: 100%; max-width: 300px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .media-item img, .media-item video { width: 100%; border-radius: 8px; }
    @media (min-width: 600px) {
      .media-item { width: 45%; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Mes Fichiers</h1>
  </header>  <div class="controls">
    <input type="text" id="folderName" placeholder="Nom du dossier">
    <button onclick="createFolder()">Créer un dossier</button>
    <select id="sortMethod" onchange="renderFolders()">
      <option value="recent">Dernier ajout</option>
      <option value="alpha">Ordre alphabétique</option>
    </select>
    <input type="file" id="fileInput" accept="image/*,video/*" multiple>
  </div>  <div id="folders"></div>
  <div id="media"></div>  <script>
    let folders = JSON.parse(localStorage.getItem("folders") || "{}");
    let currentFolder = null;

    function save() {
      localStorage.setItem("folders", JSON.stringify(folders));
    }

    function createFolder() {
      const name = document.getElementById("folderName").value.trim();
      if (name && !folders[name]) {
        folders[name] = [];
        save();
        renderFolders();
        document.getElementById("folderName").value = "";
      }
    }

    function renderFolders() {
      document.getElementById("media").style.display = "none";
      document.getElementById("folders").style.display = "flex";

      const sort = document.getElementById("sortMethod").value;
      let folderNames = Object.keys(folders);

      if (sort === "alpha") {
        folderNames.sort((a, b) => a.localeCompare(b, ['fr', 'tr'], { sensitivity: 'base' }));
      } else {
        folderNames = folderNames.reverse(); // last added first
      }

      const container = document.getElementById("folders");
      container.innerHTML = "";

      for (const name of folderNames) {
        const div = document.createElement("div");
        div.className = "folder";
        div.textContent = name;
        div.onclick = () => openFolder(name);
        container.appendChild(div);
      }
    }

    function openFolder(name) {
      currentFolder = name;
      document.getElementById("folders").style.display = "none";
      document.getElementById("media").style.display = "flex";
      renderMedia();
    }

    function renderMedia() {
      const container = document.getElementById("media");
      container.innerHTML = "";

      for (const file of folders[currentFolder]) {
        const div = document.createElement("div");
        div.className = "media-item";

        if (file.type.startsWith("image")) {
          const img = document.createElement("img");
          img.src = file.data;
          img.onclick = () => openFullscreen(img);
          div.appendChild(img);
        } else if (file.type.startsWith("video")) {
          const video = document.createElement("video");
          video.controls = true;
          video.src = file.data;
          div.appendChild(video);
        }
        container.appendChild(div);
      }
    }

    function openFullscreen(img) {
      const win = window.open();
      win.document.write(`<img src="${img.src}" style="width:100%">`);
    }

    document.getElementById("fileInput").addEventListener("change", (e) => {
      const files = e.target.files;
      if (!currentFolder || !folders[currentFolder]) return alert("Sélectionne d'abord un dossier.");

      for (const file of files) {
        const reader = new FileReader();
        reader.onload = () => {
          folders[currentFolder].push({
            name: file.name,
            type: file.type,
            data: reader.result,
          });
          save();
          renderMedia();
        };
        reader.readAsDataURL(file);
      }
    });

    renderFolders();
  </script></body>
</html>